<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>bus-data | BusDK Design Document</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="bus-data" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="bus-data is the workspace dataset tool for BusDK repositories." />
<meta property="og:description" content="bus-data is the workspace dataset tool for BusDK repositories." />
<link rel="canonical" href="http://localhost:4000/modules/bus-data.html" />
<meta property="og:url" content="http://localhost:4000/modules/bus-data.html" />
<meta property="og:site_name" content="BusDK Design Document" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="bus-data" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"bus-data is the workspace dataset tool for BusDK repositories.","headline":"bus-data","url":"http://localhost:4000/modules/bus-data.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=75995bd36d97e180d883903e5860ec99f62566a0">
    <meta name="color-scheme" content="light dark">

<!-- Theme color for browser UI (light/dark). Keep in sync with busdk tokens. -->
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#0b0f14" media="(prefers-color-scheme: dark)">

  </head>
  <body class="busdk-docs-page">
    <div class="busdk-docs">
      <header class="busdk-site-header">
        <div class="busdk-site-header-inner">
          <a class="busdk-site-header-logo" href="/">BusDK Design Document</a>
        </div>
      </header>

      <div class="busdk-docs-body">
        
        <nav class="busdk-sidebar" aria-label="Documentation">
  <div class="busdk-sidebar-inner">
    <a class="busdk-sidebar-home" href="/">BusDK Design Document</a>
    <ul class="busdk-sidebar-nav">
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Get started</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/overview/">Overview</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/design-goals/">Design goals and requirements</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/implementation/development-status">Development status</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Workflows</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/workflow/accounting-workflow-overview">Accounting workflow overview</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/workflow/">Example end-to-end workflow</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/cli/">CLI tooling and workflow</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel" open>
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Modules</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link busdk-sidebar-link--current" href="/modules/">Modules overview</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link busdk-sidebar-link--current" href="/modules/bus">bus</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-init">bus init</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-config">bus config</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link busdk-sidebar-link--current" href="/modules/bus-data">bus data</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-api">bus api</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-sheets">bus sheets</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-dev">bus dev</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-agent">bus agent</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-bfl">bus bfl</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-accounts">bus accounts</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-entities">bus entities</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-period">bus period</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-preferences">bus preferences</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-attachments">bus attachments</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-invoices">bus invoices</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-journal">bus journal</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-bank">bus bank</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-reconcile">bus reconcile</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-assets">bus assets</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-loans">bus loans</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-inventory">bus inventory</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-payroll">bus payroll</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-budget">bus budget</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-reports">bus reports</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-validate">bus validate</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-vat">bus vat</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-pdf">bus pdf</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-filing">bus filing</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-filing-prh">bus filing prh</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-filing-vero">bus filing vero</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Software Design Documents</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/">SDD overview</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus">bus</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-init">bus init</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-config">bus config</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-data">bus data</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-api">bus api</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-sheets">bus sheets</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-dev">bus dev</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-agent">bus agent</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-bfl">bus bfl</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-accounts">bus accounts</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-entities">bus entities</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-period">bus period</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-preferences">bus preferences</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-attachments">bus attachments</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-invoices">bus invoices</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-journal">bus journal</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-bank">bus bank</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-reconcile">bus reconcile</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-assets">bus assets</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-loans">bus loans</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-inventory">bus inventory</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-payroll">bus payroll</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-budget">bus budget</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-reports">bus reports</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-validate">bus validate</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-vat">bus vat</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-pdf">bus pdf</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-filing">bus filing</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-filing-prh">bus filing prh</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-filing-vero">bus filing vero</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Design</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/architecture/">System architecture</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/data/">Data formats and storage</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/layout/">Data directory layout</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Reference</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/master-data/">Master data</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/integration/">Integration and future interfaces</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/extensibility/">Extensibility model</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/testing/">Testing</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/references/">References and foundations</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Compliance</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/compliance/fi-bookkeeping-and-tax-audit">Finnish bookkeeping and tax-audit</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/compliance/fi-company-reorganisation-evidence-pack">Finnish company reorganisation (yrityssaneeraus)</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
    </ul>
  </div>
</nav>

        

        <main class="busdk-main busdk-main--with-sidebar">
          <div class="busdk-main-inner markdown-body">
            
            <header class="busdk-page-header">
              <div class="busdk-content-inner">
                <h1>bus-data</h1>
              </div>
            </header>
            

            <section class="busdk-chapter busdk-chapter--level-2"><div class="busdk-chapter-inner">
<section class="busdk-chapter busdk-chapter--level-3 busdk-chapter--title"><div class="busdk-chapter-section-inner busdk-content-inner">
<h2 id="bus-data--inspect-and-maintain-workspace-datasets-schemas-and-data-packages">
<code class="language-plaintext highlighter-rouge">bus-data</code> — inspect and maintain workspace datasets, schemas, and data packages</h2>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="synopsis">Synopsis</h3>

<p><code class="language-plaintext highlighter-rouge">bus-data schema init &lt;table&gt; --schema &lt;file&gt; [--force] [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data schema show &lt;table&gt; | schema show --resource &lt;name&gt; [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data schema infer &lt;table&gt; [--sample &lt;n&gt;] [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data schema add-field &lt;table&gt; --field &lt;name&gt; --type &lt;type&gt; [--default &lt;value&gt;] [--required] [--description &lt;text&gt;] [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data schema field add &lt;table&gt; --field &lt;name&gt; --type &lt;type&gt; [--formula-mode ...] [--formula-prefix ...] [--formula-result-type ...] [--default &lt;value&gt;] [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data schema set-type &lt;table&gt; --field &lt;name&gt; --type &lt;type&gt; [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data schema patch [--resource &lt;name&gt;] --patch &lt;file&gt; [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data package init | package show | package patch --patch &lt;file&gt; | package validate [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data resource list | resource validate &lt;resource&gt; [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data resource add --name &lt;name&gt; --path &lt;path&gt; --schema &lt;file&gt; [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data resource remove &lt;resource&gt; [--delete-files] [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data row add &lt;table&gt; (--set &lt;key&gt;=&lt;value&gt; ... | --json &lt;file&gt;) [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data row update &lt;table&gt; --key &lt;key&gt;=&lt;value&gt; ... (--set &lt;key&gt;=&lt;value&gt; ... | --json &lt;file&gt;) [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data row delete &lt;table&gt; --key &lt;key&gt;=&lt;value&gt; ... [--chdir &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data table read &lt;table&gt; [--row &lt;index|start:end&gt;] [--column &lt;name&gt;] ... [--filter &lt;field&gt;=&lt;value&gt;] ... [--key &lt;key&gt;=&lt;value&gt;] [--formula-source] [--chdir &lt;dir&gt;] [-o &lt;file&gt;] [-f &lt;format&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus-data table list [--chdir &lt;dir&gt;] [-o &lt;file&gt;] [-f &lt;format&gt;] [global flags]</code></p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="description">Description</h3>

<p>Command names follow <a href="../cli/command-naming">CLI command naming</a>. <code class="language-plaintext highlighter-rouge">bus-data</code> is the workspace dataset tool for BusDK repositories. It reads tables, schemas, and data packages, validates records and foreign keys, and performs schema-governed changes in a deterministic way. The goal is to make dataset maintenance predictable and reviewable while keeping day-to-day operations simple and non-interactive.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="getting-started">Getting started</h3>

<p>Start by defining a schema and letting <code class="language-plaintext highlighter-rouge">bus-data</code> create the table and its beside-the-table schema file. The table path may omit the <code class="language-plaintext highlighter-rouge">.csv</code> suffix, and <code class="language-plaintext highlighter-rouge">schema init</code> writes both the CSV and the <code class="language-plaintext highlighter-rouge">.schema.json</code> in one deterministic step. Schema metadata such as <code class="language-plaintext highlighter-rouge">primaryKey</code>, <code class="language-plaintext highlighter-rouge">foreignKeys</code>, and <code class="language-plaintext highlighter-rouge">missingValues</code> is preserved when you initialize the table. Use <code class="language-plaintext highlighter-rouge">--force</code> when you need to overwrite an existing table and schema with a new definition.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data schema init customers --schema customers.schema.json
bus-data schema init customers --schema customers.schema.json --force
</code></pre></div></div>

<p>If you manage a workspace data package, initialize <code class="language-plaintext highlighter-rouge">datapackage.json</code> after the table exists so the resource is discovered deterministically.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data package init
</code></pre></div></div>

<p>Add rows with either repeated <code class="language-plaintext highlighter-rouge">--set</code> assignments or a JSON file. Each row is validated against the schema before it is written, and duplicate primary keys are rejected for both single-column and composite keys.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data row add customers --set id=1 --set name=Ada --set active=true
bus-data row add customers --json row2.json
</code></pre></div></div>

<p>List tables in the workspace to confirm what exists. The output is a deterministic, workspace-relative list of table and schema paths, and you can request JSON format when you need structured output.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data table list
</code></pre></div></div>

<p>Read a table to get its canonical CSV. <code class="language-plaintext highlighter-rouge">bus-data</code> always validates against the schema before it emits rows, and JSON output is available for downstream tooling.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data table read customers
</code></pre></div></div>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="read-only-what-you-need">Read only what you need</h3>

<p>When you want a narrower view, you can select rows and columns without changing validation. The filters are applied after validation, so the table still must pass its schema. Use <code class="language-plaintext highlighter-rouge">--row</code> with a single index or an inclusive <code class="language-plaintext highlighter-rouge">start:end</code> range, and repeat <code class="language-plaintext highlighter-rouge">--column</code> or <code class="language-plaintext highlighter-rouge">--filter</code> to refine the output.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data table read customers --row 1 --column id --column name
bus-data table read customers --row 1:2 --column id
bus-data table read customers --filter status=active --filter name=Ada
</code></pre></div></div>

<p>If your tables use a primary key, use <code class="language-plaintext highlighter-rouge">--key field=value</code> for a single-column key. Repeat <code class="language-plaintext highlighter-rouge">--key</code> for composite keys in the same order as the schema’s <code class="language-plaintext highlighter-rouge">primaryKey</code>. Primary key uniqueness is enforced on <code class="language-plaintext highlighter-rouge">row add</code> for both single-column and composite keys.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data table read customers --key id=1
</code></pre></div></div>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="update-and-delete-rows">Update and delete rows</h3>

<p>Row updates only succeed when the schema allows in-place edits. The schema’s <code class="language-plaintext highlighter-rouge">busdk.update_policy</code> must be set to <code class="language-plaintext highlighter-rouge">in_place</code> for updates to work. Updates accept either repeated <code class="language-plaintext highlighter-rouge">--set</code> assignments or a JSON file payload. Updates use the primary key to identify a single row, and composite keys are provided by repeating <code class="language-plaintext highlighter-rouge">--key field=value</code>.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data row update customers --key id=1 --set balance=15.00
bus-data row update customers --key id=1 --json row_update.json
</code></pre></div></div>

<p>Row deletes follow the schema’s delete policy. When the policy is <code class="language-plaintext highlighter-rouge">soft</code>, <code class="language-plaintext highlighter-rouge">bus-data</code> writes the configured soft-delete field and value rather than removing the row. The schema’s <code class="language-plaintext highlighter-rouge">busdk.delete_policy</code>, <code class="language-plaintext highlighter-rouge">busdk.soft_delete_field</code>, and <code class="language-plaintext highlighter-rouge">busdk.soft_delete_value</code> control that behavior.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data row delete customers --key id=2
</code></pre></div></div>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="manage-data-packages-and-resources">Manage data packages and resources</h3>

<p>Use <code class="language-plaintext highlighter-rouge">package init</code> to create <code class="language-plaintext highlighter-rouge">datapackage.json</code> from the current tables and beside-the-table schemas, <code class="language-plaintext highlighter-rouge">package show</code> to inspect it, <code class="language-plaintext highlighter-rouge">package patch</code> to apply a JSON merge patch, and <code class="language-plaintext highlighter-rouge">package validate</code> to validate the full workspace package including foreign keys. Package initialization and listing keep resource ordering deterministic. Use <code class="language-plaintext highlighter-rouge">resource list</code> to see the current resources in deterministic order, and <code class="language-plaintext highlighter-rouge">resource validate</code> to validate a single resource without modifying files. Validation outputs a status row per resource, and when foreign key validation fails the command exits non-zero and reports the failure on standard error.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data package init
bus-data package show
bus-data package patch --patch package.patch.json
bus-data package validate
bus-data resource list
bus-data resource validate customers
</code></pre></div></div>

<p>Add resources explicitly with a name and CSV path and provide <code class="language-plaintext highlighter-rouge">--schema</code> to supply the Table Schema to write beside the table. This creates the CSV and beside-the-table schema artifacts. Remove a resource with <code class="language-plaintext highlighter-rouge">--delete-files</code> to delete its CSV and schema; the command refuses removal when any foreign key references the resource.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data resource add --name customers --path customers.csv --schema customers.schema.json
bus-data resource remove customers --delete-files
</code></pre></div></div>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="inspect-and-evolve-schemas">Inspect and evolve schemas</h3>

<p>Use <code class="language-plaintext highlighter-rouge">schema show</code> when you need the exact schema JSON. It prints the schema file as-is, either by table path or by resource name, so the output matches the bytes on disk. When <code class="language-plaintext highlighter-rouge">datapackage.json</code> is present, <code class="language-plaintext highlighter-rouge">--resource</code> resolves the schema path from the package.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data schema show customers
bus-data schema show --resource customers
</code></pre></div></div>

<p>If you already have a CSV, you can infer a schema from existing data and write it beside the table.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data schema infer products --sample 2
</code></pre></div></div>

<p>Adding a field extends both the schema and the CSV. A default value is written to existing rows, and you can mark the field as required and add a description. When you need formula metadata inline, use <code class="language-plaintext highlighter-rouge">schema field add</code> with formula flags so the schema and table stay in sync.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data schema add-field products --field category --type string --default general --required --description "category"
bus-data schema field add products --field total --type string --formula-mode inline --formula-prefix "=" --formula-result-type number --default "=a + b"
</code></pre></div></div>

<p>Changing a field type updates the schema only when existing values are compatible with the new type.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data schema set-type products --field price --type number
</code></pre></div></div>

<p>Schema metadata can include <code class="language-plaintext highlighter-rouge">primaryKey</code>, <code class="language-plaintext highlighter-rouge">foreignKeys</code>, and <code class="language-plaintext highlighter-rouge">missingValues</code>. These are preserved by <code class="language-plaintext highlighter-rouge">schema init</code>, and <code class="language-plaintext highlighter-rouge">primaryKey</code> can be either a single field name or an ordered list for composite keys. Foreign key definitions follow the Table Schema format and are enforced during resource and package validation.</p>

<p>When you need full control over schema metadata, apply a JSON merge patch that preserves unknown properties. Use <code class="language-plaintext highlighter-rouge">--resource</code> to target a schema by resource name when <code class="language-plaintext highlighter-rouge">datapackage.json</code> is present.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data schema patch --resource products --patch schema.patch.json
</code></pre></div></div>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="formula-driven-columns">Formula-driven columns</h3>

<p>Schemas can declare formula columns by adding a <code class="language-plaintext highlighter-rouge">busdk.formula</code> block under a field. Inline formulas are stored in the CSV cell values and evaluated at read time. Constant formulas ignore cell values and use the schema expression as the source of truth. Formula results are typed and may include rounding rules for numeric results.</p>

<p>Formulas use the BFL language. Inline formulas typically set a <code class="language-plaintext highlighter-rouge">prefix</code> such as <code class="language-plaintext highlighter-rouge">=</code> and accept per-cell expressions. Constant formulas set <code class="language-plaintext highlighter-rouge">mode</code> to <code class="language-plaintext highlighter-rouge">constant</code> and provide an <code class="language-plaintext highlighter-rouge">expression</code> string. When <code class="language-plaintext highlighter-rouge">on_error</code> is set to <code class="language-plaintext highlighter-rouge">null</code>, formula errors yield empty output values instead of failing the read.</p>

<p>To get started with inline formulas, define a column with a <code class="language-plaintext highlighter-rouge">busdk.formula</code> block, add rows with the formula expression in the cell, and read the table to see computed values. The formula source stays in the CSV, while <code class="language-plaintext highlighter-rouge">table read</code> emits the computed value.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat &gt; laskelmat.schema.json &lt;&lt;'JSON'
{
  "fields": [
    {"name": "a", "type": "integer"},
    {"name": "b", "type": "integer"},
    {
      "name": "total",
      "type": "string",
      "busdk": {
        "formula": {
          "language": "bfl",
          "mode": "inline",
          "prefix": "=",
          "result": {"type": "integer"}
        }
      }
    }
  ]
}
JSON
bus-data schema init laskelmat --schema laskelmat.schema.json
bus-data row add laskelmat --set a=2 --set b=3 --set total==a + b
bus-data table read laskelmat
</code></pre></div></div>

<p>If you need to inspect the raw formula sources, <code class="language-plaintext highlighter-rouge">--formula-source</code> adds an extra column that captures the original formula expression for each formula field without colliding with existing column names. The source column name is the formula field name with the <code class="language-plaintext highlighter-rouge">__formula_source</code> suffix.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data table read laskelmat --formula-source
</code></pre></div></div>

<p>Constant formulas are driven entirely by the schema. This is useful when you want a computed column that does not depend on per-row input, such as a fixed ratio with controlled rounding.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat &gt; laskelmat_const.schema.json &lt;&lt;'JSON'
{
  "fields": [
    {"name": "label", "type": "string"},
    {
      "name": "total",
      "type": "string",
      "busdk": {
        "formula": {
          "language": "bfl",
          "mode": "constant",
          "expression": "1 / 8",
          "result": {"type": "number"},
          "rounding": {"scale": 2, "mode": "half_even"}
        }
      }
    }
  ]
}
JSON
bus-data schema init laskelmat_const --schema laskelmat_const.schema.json
bus-data row add laskelmat_const --set label=ok
bus-data table read laskelmat_const
</code></pre></div></div>

<p>Formula evaluation uses a table snapshot, so range expressions resolve against the same read and do not depend on row-by-row mutation. Invalid formula metadata is rejected at read time and reports a formula error to standard error. To treat formula errors as empty values, set <code class="language-plaintext highlighter-rouge">on_error</code> to <code class="language-plaintext highlighter-rouge">null</code> in the formula block.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="output-formats-and-files">Output formats and files</h3>

<p><code class="language-plaintext highlighter-rouge">bus-data</code> can emit JSON where a command supports structured output. Table and resource listings default to TSV, while table reads default to CSV. Package and resource validation report one row per resource and use TSV by default, or JSON when <code class="language-plaintext highlighter-rouge">--format json</code> is set. JSON outputs preserve the CSV string values and keep ordering deterministic.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data --format json table list
bus-data --format json resource list
bus-data --format json table read customers
bus-data --format json package validate
bus-data --format json resource validate customers
</code></pre></div></div>

<p>To capture output in a file, use <code class="language-plaintext highlighter-rouge">--output</code>. If you also use <code class="language-plaintext highlighter-rouge">--quiet</code>, output is suppressed and the file is not written.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data --output out_list.tsv table list
bus-data --quiet --output out_list.tsv table list
</code></pre></div></div>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="workspace-and-safety-flags">Workspace and safety flags</h3>

<p>Global flags (including <code class="language-plaintext highlighter-rouge">--chdir</code>) are defined in <a href="../cli/global-flags">Standard global flags</a>. Use <code class="language-plaintext highlighter-rouge">--chdir</code> to set the workspace root before resolving any paths. This is useful when you run <code class="language-plaintext highlighter-rouge">bus-data</code> from another directory.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data --chdir /path/to/workspace table list
</code></pre></div></div>

<p>Use <code class="language-plaintext highlighter-rouge">--dry-run</code> on mutating commands to see what would change without writing files. This keeps existing CSV and schema files unchanged.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data --dry-run row add products --set id=P-4 --set name="Product D"
</code></pre></div></div>

<p>If a table name starts with <code class="language-plaintext highlighter-rouge">-</code>, place <code class="language-plaintext highlighter-rouge">--</code> before the command arguments to stop flag parsing.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bus-data -- table read -taulu
</code></pre></div></div>

<p>Help and version output are printed to standard output. Diagnostics and validation failures are printed to standard error. You can disable or force colored output for diagnostics with <code class="language-plaintext highlighter-rouge">--color auto|always|never</code> or <code class="language-plaintext highlighter-rouge">--no-color</code>, and the flags are accepted even when you only need help or version output.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="files">Files</h3>

<p>Operates on any workspace CSV and its beside-the-table <code class="language-plaintext highlighter-rouge">.schema.json</code> (same directory, <code class="language-plaintext highlighter-rouge">.csv</code> replaced by <code class="language-plaintext highlighter-rouge">.schema.json</code>), plus <code class="language-plaintext highlighter-rouge">datapackage.json</code> at the workspace root when present.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="exit-status">Exit status</h3>

<p><code class="language-plaintext highlighter-rouge">0</code> on success. <code class="language-plaintext highlighter-rouge">2</code> on invalid usage. Non-zero on missing files, schema validation failure, or foreign key integrity failure.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="development-state">Development state</h3>

<p><strong>Value:</strong> Inspect and maintain workspace datasets, schemas, and data packages with schema-governed row and schema operations so tables stay valid and reviewable without running domain CLIs.</p>

<p><strong>Use cases:</strong> Orphan: no documented use case yet (infrastructure for <a href="./bus-api">bus-api</a> and <a href="./bus-sheets">bus-sheets</a>).</p>

<p><strong>Completeness:</strong> 60% (Stable for one use case) — schema init/show, package init/validate, table and row operations, and validation verified by e2e and unit tests.</p>

<p><strong>Current:</strong> E2e script <code class="language-plaintext highlighter-rouge">tests/e2e_bus_data.sh</code> proves schema init creates table and schema files, schema show prints exact schema bytes, package init and validate, row add/update/delete, table read with filters and key, and deterministic I/O. Unit tests in <code class="language-plaintext highlighter-rouge">pkg/data/</code> and <code class="language-plaintext highlighter-rouge">internal/cli/</code> cover mutate, patch, validate, formula, and workspace behavior.</p>

<p><strong>Planned next:</strong> Resource add/remove; schema key and foreign-key ops; field add/remove/rename; <code class="language-plaintext highlighter-rouge">--resource</code> resolution.</p>

<p><strong>Blockers:</strong> None known.</p>

<p><strong>Depends on:</strong> None.</p>

<p><strong>Used by:</strong> <a href="./bus-api">bus-api</a> and <a href="./bus-sheets">bus-sheets</a> depend on it for workspace endpoints and the embedded UI backend.</p>

<p>See <a href="../implementation/development-status">Development status</a>.</p>

<hr>

<!-- busdk-docs-nav start -->
</div></section>
</div></section><div class="busdk-prev-next-bar"><div class="busdk-content-inner"><p class="busdk-prev-next">
  <span class="busdk-prev-next-item busdk-prev">← <a href="./bus-init">bus-init</a></span>
  <span class="busdk-prev-next-item busdk-index"><a href="./index">Module CLI reference</a></span>
  <span class="busdk-prev-next-item busdk-next"><a href="./bus-dev">bus-dev</a> →</span>
</p></div></div>
<!-- busdk-docs-nav end -->

<div class="busdk-meta-block busdk-content-inner"><div class="busdk-meta-section">
<h3 id="sources">Sources</h3>

<ul>
  <li><a href="../master-data/index">Master data: Master data (business objects)</a></li>
  <li><a href="../sdd/bus-data">Module SDD: bus-data</a></li>
  <li><a href="../data/storage-backends">Storage contract: Storage backends and workspace store interface</a></li>
</ul>

</div></div>
          </div>
        </main>
      </div>

      
      <footer class="busdk-footer" role="contentinfo">
        <div class="busdk-footer-inner">
          <span class="busdk-footer-edit">This site is open source. <a href="https://github.com/busdk/docs/edit/gh-pages/modules/bus-data.md">Improve this page</a>.</span>
          <span class="busdk-footer-copyright">&copy; 2026 <a href="https://hg.fi">Heusala Group Ltd</a></span>
        </div>
      </footer>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
