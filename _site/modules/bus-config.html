<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>bus-config — create and update workspace configuration | BusDK Design Document</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="bus-config — create and update workspace configuration" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="bus config owns workspace-level configuration stored in datapackage.json at the workspace root." />
<meta property="og:description" content="bus config owns workspace-level configuration stored in datapackage.json at the workspace root." />
<link rel="canonical" href="http://localhost:4000/modules/bus-config.html" />
<meta property="og:url" content="http://localhost:4000/modules/bus-config.html" />
<meta property="og:site_name" content="BusDK Design Document" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="bus-config — create and update workspace configuration" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"bus config owns workspace-level configuration stored in datapackage.json at the workspace root.","headline":"bus-config — create and update workspace configuration","url":"http://localhost:4000/modules/bus-config.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=d0d9bdf2796f7f4cfd8e7b681d7cd81188df2206">
    <meta name="color-scheme" content="light dark">

<!-- Theme color for browser UI (light/dark). Keep in sync with busdk tokens. -->
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#0b0f14" media="(prefers-color-scheme: dark)">

  </head>
  <body class="busdk-docs-page">
    <div class="busdk-docs">
      <header class="busdk-site-header">
        <div class="busdk-site-header-inner">
          <a class="busdk-site-header-logo" href="/">BusDK Design Document</a>
        </div>
      </header>

      <div class="busdk-docs-body">
        
        <nav class="busdk-sidebar" aria-label="Documentation">
  <div class="busdk-sidebar-inner">
    <a class="busdk-sidebar-home" href="/">BusDK Design Document</a>
    <ul class="busdk-sidebar-nav">
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Get started</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/overview/">Overview</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/design-goals/">Design goals and requirements</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/implementation/development-status">Development status</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Workflows</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/workflow/accounting-workflow-overview">Accounting workflow overview</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/workflow/">Example end-to-end workflow</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/cli/">CLI tooling and workflow</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel" open>
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Modules</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link busdk-sidebar-link--current" href="/modules/">Modules overview</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link busdk-sidebar-link--current" href="/modules/bus">bus</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-init">bus init</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link busdk-sidebar-link--current" href="/modules/bus-config">bus config</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-data">bus data</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-api">bus api</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-sheets">bus sheets</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-dev">bus dev</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-agent">bus agent</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-bfl">bus bfl</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-accounts">bus accounts</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-entities">bus entities</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-period">bus period</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-preferences">bus preferences</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-attachments">bus attachments</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-invoices">bus invoices</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-journal">bus journal</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-bank">bus bank</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-reconcile">bus reconcile</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-assets">bus assets</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-loans">bus loans</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-inventory">bus inventory</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-payroll">bus payroll</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-budget">bus budget</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-reports">bus reports</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-validate">bus validate</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-vat">bus vat</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-pdf">bus pdf</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-filing">bus filing</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-filing-prh">bus filing prh</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/modules/bus-filing-vero">bus filing vero</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Software Design Documents</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/">SDD overview</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus">bus</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-init">bus init</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-config">bus config</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-data">bus data</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-api">bus api</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-sheets">bus sheets</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-dev">bus dev</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-agent">bus agent</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-bfl">bus bfl</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-accounts">bus accounts</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-entities">bus entities</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-period">bus period</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-preferences">bus preferences</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-attachments">bus attachments</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-invoices">bus invoices</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-journal">bus journal</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-bank">bus bank</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-reconcile">bus reconcile</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-assets">bus assets</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-loans">bus loans</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-inventory">bus inventory</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-payroll">bus payroll</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-budget">bus budget</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-reports">bus reports</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-validate">bus validate</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-vat">bus vat</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-pdf">bus pdf</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-filing">bus filing</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-filing-prh">bus filing prh</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/sdd/bus-filing-vero">bus filing vero</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Design</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/architecture/">System architecture</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/data/">Data formats and storage</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/layout/">Data directory layout</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Reference</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/master-data/">Master data</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/integration/">Integration and future interfaces</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/extensibility/">Extensibility model</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/testing/">Testing</a>
              
            </li>
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/references/">References and foundations</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
      
      
      <li class="busdk-sidebar-section">
        <details class="busdk-sidebar-section-panel">
          <summary class="busdk-sidebar-section-toggle">
            <span class="busdk-sidebar-section-title">Compliance</span>
            <span class="busdk-sidebar-section-chevron" aria-hidden="true">▸</span>
          </summary>
          <ul class="busdk-sidebar-links">
            
            
            
            
            

            
            

            <li class="busdk-sidebar-item">
              <a class="busdk-sidebar-link" href="/compliance/fi-bookkeeping-and-tax-audit">Finnish bookkeeping and tax-audit</a>
              
            </li>
            
          </ul>
        </details>
      </li>
      
    </ul>
  </div>
</nav>

        

        <main class="busdk-main busdk-main--with-sidebar">
          <div class="busdk-main-inner markdown-body">
            
            <header class="busdk-page-header">
              <div class="busdk-content-inner">
                <h1>bus-config — create and update workspace configuration</h1>
              </div>
            </header>
            

            <section class="busdk-chapter busdk-chapter--level-2"><div class="busdk-chapter-inner">
<section class="busdk-chapter busdk-chapter--level-3 busdk-chapter--title"><div class="busdk-chapter-section-inner busdk-content-inner">
<h2 id="bus-config--create-and-update-workspace-configuration">
<code class="language-plaintext highlighter-rouge">bus-config</code> — create and update workspace configuration</h2>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="synopsis">Synopsis</h3>

<p><code class="language-plaintext highlighter-rouge">bus config init [-C &lt;dir&gt;] [-o &lt;file&gt;] [-v] [-q] [--color &lt;auto|always|never&gt;] [-h] [-V]</code><br>
<code class="language-plaintext highlighter-rouge">bus config configure [--base-currency &lt;code&gt;] [--fiscal-year-start &lt;YYYY-MM-DD&gt;] [--fiscal-year-end &lt;YYYY-MM-DD&gt;] [--vat-registered &lt;true|false&gt;] [--vat-reporting-period &lt;monthly|quarterly&gt;] [-C &lt;dir&gt;] [-o &lt;file&gt;] [-v] [-q] [--color &lt;auto|always|never&gt;] [-h] [-V]</code><br>
<code class="language-plaintext highlighter-rouge">bus config set agent &lt;runtime&gt;</code><br>
<code class="language-plaintext highlighter-rouge">bus config get agent [-C &lt;dir&gt;] [-o &lt;file&gt;] [-v] [-q] [--color &lt;auto|always|never&gt;] [-h] [-V]</code></p>

<p>All paths and the workspace directory are resolved relative to the current directory unless you set <code class="language-plaintext highlighter-rouge">-C</code> / <code class="language-plaintext highlighter-rouge">--chdir</code>. The <code class="language-plaintext highlighter-rouge">set agent</code> and <code class="language-plaintext highlighter-rouge">get agent</code> commands operate on user-level bus configuration and do not require a workspace.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="description">Description</h3>

<p>Command names follow <a href="../cli/command-naming">CLI command naming</a>. <code class="language-plaintext highlighter-rouge">bus config</code> owns workspace-level configuration stored in <code class="language-plaintext highlighter-rouge">datapackage.json</code> at the workspace root and user-level bus configuration stored in a dedicated config file. The workspace file holds <a href="../master-data/accounting-entity/index">accounting entity</a> settings (base currency, fiscal year boundaries, VAT registration, VAT reporting cadence) as BusDK metadata so other modules can read them without duplicating settings in row-level datasets. The user-level bus configuration holds preferences that apply across invocations, such as the default agent runtime used by <a href="./bus-agent">bus agent</a> and <a href="./bus-dev">bus dev</a>; that preference is read and written by the bus-agent module through the bus-config library so that the chosen agent is saved in bus configuration.</p>

<p><code class="language-plaintext highlighter-rouge">bus config init</code> creates or ensures <code class="language-plaintext highlighter-rouge">datapackage.json</code> with a valid <code class="language-plaintext highlighter-rouge">busdk.accounting_entity</code> object. When the file already has that object, init prints a warning and does nothing. <a href="./bus-init">bus init</a> always runs <code class="language-plaintext highlighter-rouge">bus config init</code> first; when you pass module-include flags (e.g. <code class="language-plaintext highlighter-rouge">--accounts</code>, <code class="language-plaintext highlighter-rouge">--journal</code>), it then runs each selected domain module’s init. You can also run <code class="language-plaintext highlighter-rouge">bus config init</code> on its own when you need only the workspace descriptor.</p>

<p><code class="language-plaintext highlighter-rouge">bus config configure</code> updates accounting entity settings in an existing workspace <code class="language-plaintext highlighter-rouge">datapackage.json</code>. The workspace must already contain <code class="language-plaintext highlighter-rouge">datapackage.json</code> with a <code class="language-plaintext highlighter-rouge">busdk.accounting_entity</code> object. Only the properties you pass via flags are changed; others remain unchanged.</p>

<p><code class="language-plaintext highlighter-rouge">bus config set agent &lt;runtime&gt;</code> saves the default agent runtime to bus configuration. The value is persisted so that <a href="./bus-agent">bus agent</a> and <a href="./bus-dev">bus dev</a> use that runtime when you do not pass <code class="language-plaintext highlighter-rouge">--agent</code> or set a session variable. <code class="language-plaintext highlighter-rouge">&lt;runtime&gt;</code> must be one of <code class="language-plaintext highlighter-rouge">cursor</code>, <code class="language-plaintext highlighter-rouge">codex</code>, <code class="language-plaintext highlighter-rouge">gemini</code>, or <code class="language-plaintext highlighter-rouge">claude</code>; any other value is invalid usage (exit 2). You do not need to be in a workspace to set or get the default agent.</p>

<p><code class="language-plaintext highlighter-rouge">bus config get agent</code> prints the current default agent from bus configuration to stdout. If none is set, the command may print nothing or a documented sentinel; see <code class="language-plaintext highlighter-rouge">bus config get agent --help</code> for the current behavior.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="commands">Commands</h3>

<p><code class="language-plaintext highlighter-rouge">init</code> — Create or ensure <code class="language-plaintext highlighter-rouge">datapackage.json</code> at the effective workspace root with a <code class="language-plaintext highlighter-rouge">busdk.accounting_entity</code> object. If the file is missing or does not contain that object, it is created or updated with default values. If it already contains <code class="language-plaintext highlighter-rouge">busdk.accounting_entity</code>, the command prints a warning to stderr and exits 0 without modifying the file. No extra positional arguments are accepted.</p>

<p><code class="language-plaintext highlighter-rouge">configure</code> — Edit accounting entity settings (base currency, fiscal year boundaries, VAT registration, VAT reporting cadence) in the workspace <code class="language-plaintext highlighter-rouge">datapackage.json</code>. Requires an existing workspace that already has <code class="language-plaintext highlighter-rouge">datapackage.json</code> and a <code class="language-plaintext highlighter-rouge">busdk.accounting_entity</code> object. Only the flags you provide are applied. No extra positional arguments are accepted.</p>

<p><code class="language-plaintext highlighter-rouge">set agent &lt;runtime&gt;</code> — Save the default agent runtime to bus configuration. The <a href="./bus-agent">bus-agent</a> and <a href="./bus-dev">bus-dev</a> modules read this value via the bus-config library when no per-command or session preference is set. <code class="language-plaintext highlighter-rouge">&lt;runtime&gt;</code> must be one of <code class="language-plaintext highlighter-rouge">cursor</code>, <code class="language-plaintext highlighter-rouge">codex</code>, <code class="language-plaintext highlighter-rouge">gemini</code>, or <code class="language-plaintext highlighter-rouge">claude</code>. Does not require a workspace.</p>

<p><code class="language-plaintext highlighter-rouge">get agent</code> — Print the current default agent from bus configuration to stdout. Does not require a workspace.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="global-flags">Global flags</h3>

<p>These flags apply to both <code class="language-plaintext highlighter-rouge">init</code> and <code class="language-plaintext highlighter-rouge">configure</code>. They match the <a href="../cli/global-flags">standard global flags</a> shared by most BusDK modules. They can appear in any order before the subcommand. A lone <code class="language-plaintext highlighter-rouge">--</code> ends flag parsing; any following tokens are treated as positional arguments (and for <code class="language-plaintext highlighter-rouge">init</code> and <code class="language-plaintext highlighter-rouge">configure</code>, extra positionals are invalid).</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-h</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--help</code></strong> — Print help to stdout and exit 0. Other flags and arguments are ignored when help is requested.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-V</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--version</code></strong> — Print the tool name and version to stdout and exit 0. Other flags and arguments are ignored.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-v</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--verbose</code></strong> — Send verbose progress and diagnostics to stderr. You can repeat the flag (e.g. <code class="language-plaintext highlighter-rouge">-vv</code> or <code class="language-plaintext highlighter-rouge">--verbose --verbose</code>) to increase verbosity. Verbose output does not change what is written to stdout or to the file given by <code class="language-plaintext highlighter-rouge">--output</code>.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-q</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--quiet</code></strong> — Suppress normal command result output. When quiet is set, nothing is written to stdout and no output file is created or written even if <code class="language-plaintext highlighter-rouge">--output</code> is given; only errors go to stderr. Exit codes are unchanged. You cannot combine <code class="language-plaintext highlighter-rouge">--quiet</code> with <code class="language-plaintext highlighter-rouge">--verbose</code>; doing so is invalid usage and exits with code 2.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-C &lt;dir&gt;</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--chdir &lt;dir&gt;</code></strong> — Use <code class="language-plaintext highlighter-rouge">&lt;dir&gt;</code> as the effective working directory for the command. All workspace paths (e.g. <code class="language-plaintext highlighter-rouge">datapackage.json</code>) are resolved relative to this directory. If the directory does not exist or is not accessible, the command exits with code 1 and a clear error on stderr.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-o &lt;file&gt;</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--output &lt;file&gt;</code></strong> — Redirect normal command output to <code class="language-plaintext highlighter-rouge">&lt;file&gt;</code> instead of stdout. The path is relative to the effective working directory (after <code class="language-plaintext highlighter-rouge">-C</code>). The file is created or truncated. Errors and diagnostics still go to stderr. If both <code class="language-plaintext highlighter-rouge">--output</code> and <code class="language-plaintext highlighter-rouge">--quiet</code> are used, quiet wins: no output is written to the file.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--color &lt;mode&gt;</code></strong> — Control colored output for human-facing messages on stderr. <code class="language-plaintext highlighter-rouge">&lt;mode&gt;</code> must be one of <code class="language-plaintext highlighter-rouge">auto</code>, <code class="language-plaintext highlighter-rouge">always</code>, or <code class="language-plaintext highlighter-rouge">never</code>. <code class="language-plaintext highlighter-rouge">auto</code> uses color only when stderr is a terminal; <code class="language-plaintext highlighter-rouge">always</code> forces color; <code class="language-plaintext highlighter-rouge">never</code> disables it. An invalid value is a usage error and exits with code 2.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--no-color</code></strong> — Same as <code class="language-plaintext highlighter-rouge">--color=never</code>. If both are present, color is disabled.</li>
</ul>

<p>Command results (e.g. help or version) are written to stdout. Diagnostics, progress, and error messages are written to stderr so that scripts can capture results without mixing in human-oriented text.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="init-behavior-and-defaults">Init: behavior and defaults</h3>

<p><code class="language-plaintext highlighter-rouge">bus config init</code> creates <code class="language-plaintext highlighter-rouge">datapackage.json</code> when it is missing, or adds the <code class="language-plaintext highlighter-rouge">busdk.accounting_entity</code> subtree when the file exists but does not yet have it. The initial shape follows <a href="../data/workspace-configuration">workspace configuration</a>. Defaults include <code class="language-plaintext highlighter-rouge">profile</code> <code class="language-plaintext highlighter-rouge">tabular-data-package</code>, <code class="language-plaintext highlighter-rouge">base_currency</code> <code class="language-plaintext highlighter-rouge">EUR</code>, <code class="language-plaintext highlighter-rouge">vat_reporting_period</code> <code class="language-plaintext highlighter-rouge">quarterly</code>, and fiscal year and VAT registration as documented in the data package extension. You can adjust these afterward with <code class="language-plaintext highlighter-rouge">bus config configure</code>.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="configure-options-and-behavior">Configure: options and behavior</h3>

<p><code class="language-plaintext highlighter-rouge">bus config configure</code> updates only the fields you pass. Omit a flag to leave that property unchanged. The following flags map to <a href="../master-data/accounting-entity/index">accounting entity</a> properties in <code class="language-plaintext highlighter-rouge">datapackage.json</code>:</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--base-currency &lt;code&gt;</code></strong> — ISO 4217 currency code. Must be uppercase (e.g. <code class="language-plaintext highlighter-rouge">EUR</code>, <code class="language-plaintext highlighter-rouge">SEK</code>). Lowercase or invalid codes are a usage error (exit 2).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--fiscal-year-start &lt;date&gt;</code></strong> — Fiscal year start in <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code> form. Slash or other formats are invalid and yield a usage error.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--fiscal-year-end &lt;date&gt;</code></strong> — Fiscal year end in <code class="language-plaintext highlighter-rouge">YYYY-MM-DD</code> form. Same validation as start.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--vat-registered &lt;true|false&gt;</code></strong> — Exactly <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code>. Any other value is a usage error.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--vat-reporting-period &lt;period&gt;</code></strong> — Allowed values are <code class="language-plaintext highlighter-rouge">monthly</code> and <code class="language-plaintext highlighter-rouge">quarterly</code>. Other values (e.g. <code class="language-plaintext highlighter-rouge">yearly</code>) are invalid and exit with a usage error.</li>
</ul>

<p>Configure requires an existing workspace. If <code class="language-plaintext highlighter-rouge">datapackage.json</code> is missing in the effective workspace directory, the command fails with “datapackage.json not found”. If the file exists but does not contain a <code class="language-plaintext highlighter-rouge">busdk.accounting_entity</code> object (e.g. a minimal package with no BusDK extension), it fails with “missing busdk.accounting_entity”. In both cases the message is on stderr and the exit code is non-zero.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="files">Files</h3>

<p>The module reads and writes <code class="language-plaintext highlighter-rouge">datapackage.json</code> at the workspace root for workspace configuration and a dedicated user-level config file for bus configuration (e.g. default agent). The <code class="language-plaintext highlighter-rouge">init</code> subcommand creates the workspace file or ensures the <code class="language-plaintext highlighter-rouge">busdk.accounting_entity</code> subtree exists. The <code class="language-plaintext highlighter-rouge">configure</code> subcommand updates only that subtree in place. The <code class="language-plaintext highlighter-rouge">set agent</code> and <code class="language-plaintext highlighter-rouge">get agent</code> commands read and write the user-level bus configuration file; the exact path is documented in the <a href="../sdd/bus-config">module SDD</a>.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="exit-status-and-errors">Exit status and errors</h3>

<p>Exit 0 on success. Non-zero in these cases:</p>

<ul>
  <li>
<strong>Invalid usage (exit 2)</strong> — Unknown or invalid flag value (e.g. invalid <code class="language-plaintext highlighter-rouge">--color</code>, invalid <code class="language-plaintext highlighter-rouge">--base-currency</code> or date or <code class="language-plaintext highlighter-rouge">--vat-reporting-period</code>), combining <code class="language-plaintext highlighter-rouge">--quiet</code> and <code class="language-plaintext highlighter-rouge">--verbose</code>, or extra positional arguments for <code class="language-plaintext highlighter-rouge">init</code> or <code class="language-plaintext highlighter-rouge">configure</code>. The tool prints a short usage-style error to stderr.</li>
  <li>
<strong>Configure preconditions (exit non-zero)</strong> — <code class="language-plaintext highlighter-rouge">configure</code> was run in a directory without <code class="language-plaintext highlighter-rouge">datapackage.json</code> or without <code class="language-plaintext highlighter-rouge">busdk.accounting_entity</code>; see above.</li>
</ul>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="development-state">Development state</h3>

<p><strong>Value:</strong> Create and update workspace configuration (<code class="language-plaintext highlighter-rouge">datapackage.json</code>) and accounting-entity settings so every BusDK workspace has a single, schema-valid source for currency, fiscal year, and VAT settings.</p>

<p><strong>Use cases:</strong> <a href="../workflow/accounting-workflow-overview">Accounting workflow</a>.</p>

<p><strong>Completeness:</strong> 70% (Broadly usable) — init and configure fully verified by e2e; idempotent init and deterministic JSON shape test-backed.</p>

<p><strong>Use case readiness:</strong> Accounting workflow: 70% — init and configure verified; config library and set/get agent would extend usability.</p>

<p><strong>Current:</strong> E2e script <code class="language-plaintext highlighter-rouge">tests/e2e_bus_config.sh</code> proves init creates <code class="language-plaintext highlighter-rouge">datapackage.json</code> with default entity; init idempotent when entity already present; configure updates only given fields with deterministic diff; global flags and invalid usage. Unit tests in <code class="language-plaintext highlighter-rouge">internal/run/run_test.go</code> and <code class="language-plaintext highlighter-rouge">internal/config/</code> cover run and validation.</p>

<p><strong>Planned next:</strong> Config library; <code class="language-plaintext highlighter-rouge">set agent</code> / <code class="language-plaintext highlighter-rouge">get agent</code> with persistence; E2E for set/get and invalid runtime.</p>

<p><strong>Blockers:</strong> None known.</p>

<p><strong>Depends on:</strong> None.</p>

<p><strong>Used by:</strong> <a href="./bus-init">bus-init</a> runs <code class="language-plaintext highlighter-rouge">bus config init</code> first; <a href="./bus-agent">bus-agent</a> and <a href="./bus-dev">bus-dev</a> use or will use config for default agent.</p>

<p>See <a href="../implementation/development-status">Development status</a>.</p>

<hr>

<!-- busdk-docs-nav start -->
</div></section>
</div></section><div class="busdk-prev-next-bar"><div class="busdk-content-inner"><p class="busdk-prev-next">
  <span class="busdk-prev-next-item busdk-prev">← <a href="./bus-init">bus-init</a></span>
  <span class="busdk-prev-next-item busdk-index"><a href="./index">Module CLI reference</a></span>
  <span class="busdk-prev-next-item busdk-next"><a href="./bus-data">bus-data</a> →</span>
</p></div></div>
<!-- busdk-docs-nav end -->

<div class="busdk-meta-block busdk-content-inner"><div class="busdk-meta-section">
<h3 id="sources">Sources</h3>

<ul>
  <li><a href="../data/workspace-configuration">Workspace configuration (datapackage.json extension)</a></li>
  <li><a href="../master-data/accounting-entity/index">Master data: Accounting entity</a></li>
  <li><a href="../sdd/bus-config">Module SDD: bus-config</a></li>
  <li><a href="./bus-agent">bus-agent CLI reference</a></li>
  <li><a href="./bus-dev">bus-dev CLI reference</a></li>
  <li><a href="../workflow/initialize-repo">Workflow: Initialize repo</a></li>
</ul>
</div></div>
          </div>
        </main>
      </div>

      
      <footer class="busdk-footer" role="contentinfo">
        <div class="busdk-footer-inner">
          <span class="busdk-footer-edit">This site is open source. <a href="https://github.com/busdk/docs/edit/gh-pages/modules/bus-config.md">Improve this page</a>.</span>
          <span class="busdk-footer-copyright">&copy; 2026 <a href="https://hg.fi">Heusala Group Ltd</a></span>
        </div>
      </footer>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
