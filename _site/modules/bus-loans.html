<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>bus-loans — manage loans and amortization schedules | BusDK Design Document</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="bus-loans — manage loans and amortization schedules" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="bus loans maintains loan contracts and event logs as schema-validated repository data, generates amortization schedules, and produces posting suggestions…" />
<meta property="og:description" content="bus loans maintains loan contracts and event logs as schema-validated repository data, generates amortization schedules, and produces posting suggestions…" />
<link rel="canonical" href="http://localhost:4000/modules/bus-loans.html" />
<meta property="og:url" content="http://localhost:4000/modules/bus-loans.html" />
<meta property="og:site_name" content="BusDK Design Document" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="bus-loans — manage loans and amortization schedules" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"bus loans maintains loan contracts and event logs as schema-validated repository data, generates amortization schedules, and produces posting suggestions…","headline":"bus-loans — manage loans and amortization schedules","url":"http://localhost:4000/modules/bus-loans.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=d739a5c055683d9701ead80f9ac87dbed78e5d75">
    <meta name="color-scheme" content="light dark">

<!-- Theme color for browser UI (light/dark). Keep in sync with busdk tokens. -->
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#0b0f14" media="(prefers-color-scheme: dark)">

  </head>
  <body class="busdk-docs-page">
    <div class="busdk-docs">
      <header class="busdk-site-header">
        <div class="busdk-site-header-inner">
          <a class="busdk-site-header-logo" href="/">BusDK Design Document</a>
        </div>
      </header>

      <div class="busdk-docs-body">
        
        <nav class="busdk-sidebar" aria-label="Documentation">
  <div class="busdk-sidebar-inner">
    <a class="busdk-sidebar-home" href="/">BusDK Design Document</a>
    <ul class="busdk-sidebar-nav">
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Get started</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/overview/">Overview</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/design-goals/">Design goals and requirements</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/implementation/development-status">Development status</a>
          </li>
          
        </ul>
      </li>
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Design</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/sdd/">Software Design Documents (SDD)</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/architecture/">System architecture</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/data/">Data formats and storage</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/layout/">Data directory layout</a>
          </li>
          
        </ul>
      </li>
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Workflows</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/workflow/accounting-workflow-overview">Accounting workflow overview</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/workflow/">Example end-to-end workflow</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/cli/">CLI tooling and workflow</a>
          </li>
          
        </ul>
      </li>
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Reference</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/master-data/">Master data (business objects)</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link busdk-sidebar-link--current" href="/modules/">Modules</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/integration/">Integration and future interfaces</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/extensibility/">Extensibility model</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/testing/">Testing</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/references/">References and foundations</a>
          </li>
          
        </ul>
      </li>
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Compliance</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/compliance/fi-bookkeeping-and-tax-audit">Finnish bookkeeping and tax-audit</a>
          </li>
          
        </ul>
      </li>
      
    </ul>
  </div>
</nav>

        

        <main class="busdk-main busdk-main--with-sidebar">
          <div class="busdk-main-inner markdown-body">
            
            <header class="busdk-page-header">
              <div class="busdk-content-inner">
                <h1><a href="http://localhost:4000/">BusDK Design Document</a></h1>
              </div>
            </header>
            

            <section class="busdk-chapter busdk-chapter--level-2"><div class="busdk-chapter-inner">
<section class="busdk-chapter busdk-chapter--level-3 busdk-chapter--title"><div class="busdk-chapter-section-inner busdk-content-inner">
<h2 id="bus-loans--manage-loans-and-amortization-schedules">
<code class="language-plaintext highlighter-rouge">bus-loans</code> — manage loans and amortization schedules</h2>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="synopsis">Synopsis</h3>

<p><code class="language-plaintext highlighter-rouge">bus loans init [-C &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus loans add --loan-id &lt;id&gt; --counterparty &lt;entity&gt; --principal &lt;amount&gt; --start-date &lt;date&gt; --maturity-date &lt;date&gt; --interest-rate &lt;rate&gt; --principal-account &lt;account&gt; --interest-account &lt;account&gt; --cash-account &lt;account&gt; [--name &lt;name&gt;] [--rate-type &lt;type&gt;] [--payment-frequency &lt;freq&gt;] [--desc &lt;text&gt;] [-C &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus loans event --loan-id &lt;id&gt; --date &lt;date&gt; --type &lt;disbursement|repayment|interest|fee|adjustment&gt; --amount &lt;amount&gt; [allocation and voucher flags] [-C &lt;dir&gt;] [global flags]</code><br>
<code class="language-plaintext highlighter-rouge">bus loans amortize --period &lt;period&gt; [--loan-id &lt;id&gt;] [--post-date &lt;date&gt;] [-C &lt;dir&gt;] [global flags]</code></p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="description">Description</h3>

<p>Command names follow <a href="../cli/command-naming">CLI command naming</a>. <code class="language-plaintext highlighter-rouge">bus loans</code> maintains loan contracts and event logs as schema-validated repository data, generates amortization schedules, and produces posting suggestions for the journal. Corrections are append-only and traceable.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="commands">Commands</h3>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">init</code> creates the baseline loan datasets and schemas. If they already exist in full, <code class="language-plaintext highlighter-rouge">init</code> prints a warning to stderr and exits 0 without changing anything. If they exist only partially, <code class="language-plaintext highlighter-rouge">init</code> fails with an error and does not modify any file.</li>
  <li>
<code class="language-plaintext highlighter-rouge">add</code> records a new loan contract in the loan register.</li>
  <li>
<code class="language-plaintext highlighter-rouge">event</code> appends an event (disbursement, repayment, interest, fee, adjustment) and optionally produces postings.</li>
  <li>
<code class="language-plaintext highlighter-rouge">amortize</code> generates amortization and posting output for a period.</li>
</ul>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="options">Options</h3>

<p><code class="language-plaintext highlighter-rouge">add</code> accepts <code class="language-plaintext highlighter-rouge">--loan-id</code>, <code class="language-plaintext highlighter-rouge">--counterparty</code>, <code class="language-plaintext highlighter-rouge">--principal</code>, <code class="language-plaintext highlighter-rouge">--start-date</code>, <code class="language-plaintext highlighter-rouge">--maturity-date</code>, <code class="language-plaintext highlighter-rouge">--interest-rate</code>, <code class="language-plaintext highlighter-rouge">--principal-account</code>, <code class="language-plaintext highlighter-rouge">--interest-account</code>, <code class="language-plaintext highlighter-rouge">--cash-account</code>, and optional <code class="language-plaintext highlighter-rouge">--name</code>, <code class="language-plaintext highlighter-rouge">--rate-type</code>, <code class="language-plaintext highlighter-rouge">--payment-frequency</code>, <code class="language-plaintext highlighter-rouge">--desc</code>. <code class="language-plaintext highlighter-rouge">event</code> accepts <code class="language-plaintext highlighter-rouge">--loan-id</code>, <code class="language-plaintext highlighter-rouge">--date</code>, <code class="language-plaintext highlighter-rouge">--type</code>, <code class="language-plaintext highlighter-rouge">--amount</code>, and optional allocation and voucher flags. <code class="language-plaintext highlighter-rouge">amortize</code> accepts <code class="language-plaintext highlighter-rouge">--period</code> and optional <code class="language-plaintext highlighter-rouge">--loan-id</code>, <code class="language-plaintext highlighter-rouge">--post-date</code>. Global flags are defined in <a href="../cli/global-flags">Standard global flags</a>. For command-specific help, run <code class="language-plaintext highlighter-rouge">bus loans --help</code>.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="files">Files</h3>

<p>Loan register and event datasets and their beside-the-table schemas in the loans area. Master data for this module is stored in the workspace root only; the module does not use subdirectories (for example, no <code class="language-plaintext highlighter-rouge">loans/</code> folder).</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="exit-status">Exit status</h3>

<p><code class="language-plaintext highlighter-rouge">0</code> on success. Non-zero on errors, including invalid usage or schema violations.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="development-state">Development state</h3>

<p><strong>Value:</strong> Maintain loan register and events so amortization and event postings feed the <a href="./bus-journal">bus-journal</a> and loan accounts appear in <a href="./bus-reports">bus-reports</a>.</p>

<p><strong>Completeness:</strong> 40% (Meaningful task, partial verification) — init and add are implemented; unit tests cover run and flags. No e2e; event and amortize are not verified.</p>

<p><strong>Current:</strong> Unit tests in <code class="language-plaintext highlighter-rouge">internal/app/run_test.go</code> and <code class="language-plaintext highlighter-rouge">internal/cli/flags_test.go</code> prove run dispatch and flag parsing. Init and add exist in code but are not covered by e2e; event and amortize are planned, not tested.</p>

<p><strong>Planned next:</strong> event (disbursement, repayment, interest, fee, adjustment with postings); amortize (period, optional loan-id); idempotent init; root layout; add flags; ref validation; command-level tests.</p>

<p><strong>Blockers:</strong> None known.</p>

<p><strong>Depends on:</strong> <a href="./bus-accounts">bus-accounts</a>, <a href="./bus-entities">bus-entities</a> (reference validation when datasets exist).</p>

<p><strong>Used by:</strong> Loan postings feed <a href="./bus-journal">bus-journal</a>; loan accounts in <a href="./bus-reports">bus-reports</a>.</p>

<p>See <a href="../implementation/development-status">Development status</a>.</p>

<hr>

<!-- busdk-docs-nav start -->
</div></section>
</div></section><div class="busdk-prev-next-bar"><div class="busdk-content-inner"><p class="busdk-prev-next">
  <span class="busdk-prev-next-item busdk-prev">← <a href="./bus-assets">bus-assets</a></span>
  <span class="busdk-prev-next-item busdk-index"><a href="./index">Module CLI reference</a></span>
  <span class="busdk-prev-next-item busdk-next"><a href="./bus-inventory">bus-inventory</a> →</span>
</p></div></div>
<!-- busdk-docs-nav end -->

<div class="busdk-meta-block busdk-content-inner"><div class="busdk-meta-section">
<h3 id="sources">Sources</h3>

<ul>
  <li><a href="../master-data/loans/index">Owns master data: Loans</a></li>
  <li><a href="../master-data/parties/index">Master data: Parties (customers and suppliers)</a></li>
  <li><a href="../master-data/chart-of-accounts/index">Master data: Chart of accounts</a></li>
  <li><a href="../master-data/accounting-entity/index">Master data: Accounting entity</a></li>
  <li><a href="../sdd/bus-loans">Module SDD: bus-loans</a></li>
  <li><a href="../data/table-schema-contract">Data contract: Table schema contract</a></li>
</ul>

</div></div>
          </div>
        </main>
      </div>

      
      <footer class="busdk-footer" role="contentinfo">
        <div class="busdk-footer-inner">
          <span class="busdk-footer-edit">This site is open source. <a href="https://github.com/busdk/docs/edit/gh-pages/modules/bus-loans.md">Improve this page</a>.</span>
          <span class="busdk-footer-copyright">&copy; 2026 <a href="https://hg.fi">Heusala Group Ltd</a></span>
        </div>
      </footer>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
