<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>bus-init — initialize a new BusDK workspace | BusDK Design Document</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="bus-init — initialize a new BusDK workspace" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="bus init creates workspace configuration (datapackage.json) by default; domain module inits run only when you pass per-module flags." />
<meta property="og:description" content="bus init creates workspace configuration (datapackage.json) by default; domain module inits run only when you pass per-module flags." />
<link rel="canonical" href="http://localhost:4000/modules/bus-init.html" />
<meta property="og:url" content="http://localhost:4000/modules/bus-init.html" />
<meta property="og:site_name" content="BusDK Design Document" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="bus-init — initialize a new BusDK workspace" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"bus init creates workspace configuration (datapackage.json) by default; domain module inits run only when you pass per-module flags.","headline":"bus-init — initialize a new BusDK workspace","url":"http://localhost:4000/modules/bus-init.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=d739a5c055683d9701ead80f9ac87dbed78e5d75">
    <meta name="color-scheme" content="light dark">

<!-- Theme color for browser UI (light/dark). Keep in sync with busdk tokens. -->
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#0b0f14" media="(prefers-color-scheme: dark)">

  </head>
  <body class="busdk-docs-page">
    <div class="busdk-docs">
      <header class="busdk-site-header">
        <div class="busdk-site-header-inner">
          <a class="busdk-site-header-logo" href="/">BusDK Design Document</a>
        </div>
      </header>

      <div class="busdk-docs-body">
        
        <nav class="busdk-sidebar" aria-label="Documentation">
  <div class="busdk-sidebar-inner">
    <a class="busdk-sidebar-home" href="/">BusDK Design Document</a>
    <ul class="busdk-sidebar-nav">
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Get started</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/overview/">Overview</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/design-goals/">Design goals and requirements</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/implementation/development-status">Development status</a>
          </li>
          
        </ul>
      </li>
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Design</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/sdd/">Software Design Documents (SDD)</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/architecture/">System architecture</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/data/">Data formats and storage</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/layout/">Data directory layout</a>
          </li>
          
        </ul>
      </li>
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Workflows</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/workflow/accounting-workflow-overview">Accounting workflow overview</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/workflow/">Example end-to-end workflow</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/cli/">CLI tooling and workflow</a>
          </li>
          
        </ul>
      </li>
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Reference</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/master-data/">Master data (business objects)</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link busdk-sidebar-link--current" href="/modules/">Modules</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/integration/">Integration and future interfaces</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/extensibility/">Extensibility model</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/testing/">Testing</a>
          </li>
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/references/">References and foundations</a>
          </li>
          
        </ul>
      </li>
      
      <li class="busdk-sidebar-section">
        <span class="busdk-sidebar-section-title">Compliance</span>
        <ul class="busdk-sidebar-links">
          
          
          
          
          
          <li>
            <a class="busdk-sidebar-link" href="/compliance/fi-bookkeeping-and-tax-audit">Finnish bookkeeping and tax-audit</a>
          </li>
          
        </ul>
      </li>
      
    </ul>
  </div>
</nav>

        

        <main class="busdk-main busdk-main--with-sidebar">
          <div class="busdk-main-inner markdown-body">
            
            <header class="busdk-page-header">
              <div class="busdk-content-inner">
                <h1><a href="http://localhost:4000/">BusDK Design Document</a></h1>
              </div>
            </header>
            

            <section class="busdk-chapter busdk-chapter--level-2"><div class="busdk-chapter-inner">
<section class="busdk-chapter busdk-chapter--level-3 busdk-chapter--title"><div class="busdk-chapter-section-inner busdk-content-inner">
<h2 id="bus-init--initialize-a-new-busdk-workspace">
<code class="language-plaintext highlighter-rouge">bus-init</code> — initialize a new BusDK workspace</h2>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="synopsis">Synopsis</h3>

<p><code class="language-plaintext highlighter-rouge">bus init [defaults | all] [--no-accounts] [--no-entities] [--no-period] [--no-journal] [--no-invoices] [--no-vat] [--no-attachments] [--no-bank] [--no-budget] [--no-assets] [--no-inventory] [--no-loans] [--no-payroll] [--accounts] [--entities] [--period] [--journal] [--invoices] [--vat] [--attachments] [--bank] [--budget] [--assets] [--inventory] [--loans] [--payroll] [-C &lt;dir&gt;] [-o &lt;file&gt;] [-v] [-q] [--color &lt;auto|always|never&gt;] [-h] [-V]</code></p>

<p>Run <code class="language-plaintext highlighter-rouge">bus init</code> or <code class="language-plaintext highlighter-rouge">bus init defaults</code> for config only; run <code class="language-plaintext highlighter-rouge">bus init all</code> for the full baseline (use <code class="language-plaintext highlighter-rouge">--no-&lt;name&gt;</code> to exclude modules); or pass one or more per-module flags to include only those modules’ baselines. All paths and the workspace directory are resolved relative to the current directory unless you set <code class="language-plaintext highlighter-rouge">-C</code> / <code class="language-plaintext highlighter-rouge">--chdir</code>. To create or update accounting entity settings after init, use <a href="./bus-config">bus config</a>.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="description">Description</h3>

<p>Command names follow <a href="../cli/command-naming">CLI command naming</a>. <code class="language-plaintext highlighter-rouge">bus init</code> always runs <code class="language-plaintext highlighter-rouge">bus config init</code> so that <code class="language-plaintext highlighter-rouge">datapackage.json</code> and accounting entity settings exist. With no subcommand (or subcommand <code class="language-plaintext highlighter-rouge">defaults</code>) and no module-include flags, it stops after config init. When you pass subcommand <code class="language-plaintext highlighter-rouge">all</code>, it runs config init then all thirteen module inits (use <code class="language-plaintext highlighter-rouge">--no-&lt;name&gt;</code> to exclude). When you pass one or more module-include flags without <code class="language-plaintext highlighter-rouge">all</code> ( <code class="language-plaintext highlighter-rouge">--accounts</code>, <code class="language-plaintext highlighter-rouge">--entities</code>, <code class="language-plaintext highlighter-rouge">--period</code>, <code class="language-plaintext highlighter-rouge">--journal</code>, <code class="language-plaintext highlighter-rouge">--invoices</code>, <code class="language-plaintext highlighter-rouge">--vat</code>, <code class="language-plaintext highlighter-rouge">--attachments</code>, <code class="language-plaintext highlighter-rouge">--bank</code>, <code class="language-plaintext highlighter-rouge">--budget</code>, <code class="language-plaintext highlighter-rouge">--assets</code>, <code class="language-plaintext highlighter-rouge">--inventory</code>, <code class="language-plaintext highlighter-rouge">--loans</code>, <code class="language-plaintext highlighter-rouge">--payroll</code>), it then runs each selected module’s <code class="language-plaintext highlighter-rouge">init</code> in that order. Each module owns its own datasets and schemas; <code class="language-plaintext highlighter-rouge">bus init</code> does not perform Git or network operations. To change accounting entity settings afterward, use <code class="language-plaintext highlighter-rouge">bus config configure</code>.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="commands">Commands</h3>

<p><strong>Initialize the workspace.</strong> The effective workspace root is the current directory, or the directory given by <code class="language-plaintext highlighter-rouge">-C</code> / <code class="language-plaintext highlighter-rouge">--chdir</code>. The command always runs <code class="language-plaintext highlighter-rouge">bus config init</code> first. With no subcommand (or subcommand <code class="language-plaintext highlighter-rouge">defaults</code>) and no module-include flags, it runs only that step and exits; the workspace then has <code class="language-plaintext highlighter-rouge">datapackage.json</code> but no domain datasets. When subcommand <code class="language-plaintext highlighter-rouge">all</code> is supplied, it runs all thirteen data-owning module inits in order (minus any <code class="language-plaintext highlighter-rouge">--no-&lt;name&gt;</code>). When one or more module flags are supplied (and subcommand is not <code class="language-plaintext highlighter-rouge">all</code>), it then runs each selected module’s <code class="language-plaintext highlighter-rouge">init</code> in this order: accounts, entities, period, journal, invoices, vat, attachments, bank, budget, assets, inventory, loans, payroll (only the modules whose flag was passed are run, in this order). Success is determined only by the exit codes of the steps that run. The command does not check for a fixed list of baseline paths afterward; each module is responsible for creating its own files and for failing its init if it cannot. The command does not accept extra positional arguments — anything after the subcommand is rejected with a usage error.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="subcommands-and-module-include-flags">Subcommands and module-include flags</h3>

<p><strong>Subcommands</strong> select a named module set so that set names do not clash with module names (e.g. a future <code class="language-plaintext highlighter-rouge">bus init sheets</code> can denote a sheets-related set without conflicting with the bus-sheets module).</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">defaults</code></strong> (or no subcommand with no module flags) — Run only <code class="language-plaintext highlighter-rouge">bus config init</code>. Creates <code class="language-plaintext highlighter-rouge">datapackage.json</code> and accounting entity settings; no domain datasets.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">all</code></strong> — Run config init then all thirteen data-owning module inits in order. You can exclude specific modules with <strong><code class="language-plaintext highlighter-rouge">--no-&lt;name&gt;</code></strong> (e.g. <code class="language-plaintext highlighter-rouge">--no-payroll</code>); for example, <code class="language-plaintext highlighter-rouge">bus init all --no-payroll</code>. When the subcommand is not <code class="language-plaintext highlighter-rouge">all</code>, <code class="language-plaintext highlighter-rouge">--no-&lt;name&gt;</code> flags are ignored.</li>
</ul>

<p><strong>Per-module flags</strong> (below) add individual modules when you do not use the <code class="language-plaintext highlighter-rouge">all</code> subcommand. Each also has a matching <code class="language-plaintext highlighter-rouge">--no-&lt;name&gt;</code> that excludes that module when used with <code class="language-plaintext highlighter-rouge">bus init all</code>. With no subcommand and no flags (or subcommand <code class="language-plaintext highlighter-rouge">defaults</code>), only <code class="language-plaintext highlighter-rouge">bus config init</code> runs.</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--accounts</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus accounts init</code> after config init (chart of accounts).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--entities</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus entities init</code> after config init (counterparties).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--period</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus period init</code> after config init (period control).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--journal</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus journal init</code> after config init (journal index).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--invoices</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus invoices init</code> after config init (sales and purchase invoices).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--vat</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus vat init</code> after config init (VAT reference data and reports).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--attachments</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus attachments init</code> after config init (evidence index).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--bank</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus bank init</code> after config init (bank imports and transactions).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--budget</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus budget init</code> after config init (budget dataset; optional for statutory bookkeeping).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--assets</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus assets init</code> after config init (fixed-asset register and depreciation datasets).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--inventory</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus inventory init</code> after config init (item master and movement datasets).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--loans</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus loans init</code> after config init (loan register and event datasets).</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--payroll</code></strong> — Run <code class="language-plaintext highlighter-rouge">bus payroll init</code> after config init (employee and payroll run datasets).</li>
</ul>

<p>When multiple flags are given, module inits run in the order listed above. To get the full baseline (all data-owning modules), use <code class="language-plaintext highlighter-rouge">bus init all</code>.</p>

<p><strong>Examples.</strong> <code class="language-plaintext highlighter-rouge">bus init</code> or <code class="language-plaintext highlighter-rouge">bus init defaults</code> creates only <code class="language-plaintext highlighter-rouge">datapackage.json</code> and accounting entity settings. <code class="language-plaintext highlighter-rouge">bus init --accounts --entities --journal</code> creates config, then the accounts, entities, and journal baselines in that order. <code class="language-plaintext highlighter-rouge">bus init all</code> creates the full baseline (config plus all thirteen data-owning modules). <code class="language-plaintext highlighter-rouge">bus init all --no-payroll</code> creates the full baseline except payroll.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="global-flags">Global flags</h3>

<p>These flags apply to <code class="language-plaintext highlighter-rouge">init</code>. They match the <a href="../cli/global-flags">standard global flags</a> shared by most BusDK modules. They can appear in any order before the subcommand. A lone <code class="language-plaintext highlighter-rouge">--</code> ends flag parsing; any following tokens are treated as positional arguments (extra positional arguments for <code class="language-plaintext highlighter-rouge">init</code> are invalid).</p>

<ul>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-h</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--help</code></strong> — Print help to stdout and exit 0. Help lists subcommands <code class="language-plaintext highlighter-rouge">defaults</code> and <code class="language-plaintext highlighter-rouge">all</code>, each module-include flag, and the <code class="language-plaintext highlighter-rouge">--no-&lt;name&gt;</code> exclusion flags (for use with <code class="language-plaintext highlighter-rouge">all</code>), and states that with no subcommand and no flags only workspace configuration is initialized. Other flags and arguments are ignored when help is requested.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-V</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--version</code></strong> — Print the tool name and version to stdout and exit 0. Other flags and arguments are ignored.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-v</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--verbose</code></strong> — Send verbose progress and diagnostics to stderr. You can repeat the flag (e.g. <code class="language-plaintext highlighter-rouge">-vv</code> or <code class="language-plaintext highlighter-rouge">--verbose --verbose</code>) to increase verbosity. Verbose output does not change what is written to stdout or to the file given by <code class="language-plaintext highlighter-rouge">--output</code>.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-q</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--quiet</code></strong> — Suppress normal command result output. When quiet is set, nothing is written to stdout and no output file is created or written even if <code class="language-plaintext highlighter-rouge">--output</code> is given; only errors go to stderr. Exit codes are unchanged. You cannot combine <code class="language-plaintext highlighter-rouge">--quiet</code> with <code class="language-plaintext highlighter-rouge">--verbose</code>; doing so is invalid usage and exits with code 2.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-C &lt;dir&gt;</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--chdir &lt;dir&gt;</code></strong> — Use <code class="language-plaintext highlighter-rouge">&lt;dir&gt;</code> as the effective working directory for the command. All workspace paths (e.g. <code class="language-plaintext highlighter-rouge">datapackage.json</code>, module datasets) are resolved relative to this directory. The same directory is used when invoking <code class="language-plaintext highlighter-rouge">bus config init</code> and each module’s <code class="language-plaintext highlighter-rouge">init</code>. If the directory does not exist or is not accessible, the command exits with code 1 and a clear error on stderr.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">-o &lt;file&gt;</code></strong>, <strong><code class="language-plaintext highlighter-rouge">--output &lt;file&gt;</code></strong> — Redirect normal command output to <code class="language-plaintext highlighter-rouge">&lt;file&gt;</code> instead of stdout. The path is relative to the effective working directory (after <code class="language-plaintext highlighter-rouge">-C</code>). The file is created or truncated. Errors and diagnostics still go to stderr. If both <code class="language-plaintext highlighter-rouge">--output</code> and <code class="language-plaintext highlighter-rouge">--quiet</code> are used, quiet wins: no output is written to the file.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--color &lt;mode&gt;</code></strong> — Control colored output for human-facing messages on stderr. <code class="language-plaintext highlighter-rouge">&lt;mode&gt;</code> must be one of <code class="language-plaintext highlighter-rouge">auto</code>, <code class="language-plaintext highlighter-rouge">always</code>, or <code class="language-plaintext highlighter-rouge">never</code>. <code class="language-plaintext highlighter-rouge">auto</code> uses color only when stderr is a terminal; <code class="language-plaintext highlighter-rouge">always</code> forces color; <code class="language-plaintext highlighter-rouge">never</code> disables it. An invalid value (e.g. <code class="language-plaintext highlighter-rouge">neon</code>) is a usage error and exits with code 2.</li>
  <li>
<strong><code class="language-plaintext highlighter-rouge">--no-color</code></strong> — Same as <code class="language-plaintext highlighter-rouge">--color=never</code>. If both are present, color is disabled.</li>
</ul>

<p>Command results (e.g. help or version) are written to stdout. Diagnostics, progress, and error messages are written to stderr so that scripts can capture results without mixing in human-oriented text.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="init-step-order-and-baseline-files">Init: step order and baseline files</h3>

<p>The command always runs <code class="language-plaintext highlighter-rouge">bus config init</code> first. With no subcommand (or <code class="language-plaintext highlighter-rouge">defaults</code>) and no module flags, it stops after that; the workspace then has only <code class="language-plaintext highlighter-rouge">datapackage.json</code> and accounting entity settings. When subcommand <code class="language-plaintext highlighter-rouge">all</code> is supplied, it runs all thirteen data-owning module inits in order (minus any <code class="language-plaintext highlighter-rouge">--no-&lt;name&gt;</code>). When one or more module flags are supplied (and subcommand is not <code class="language-plaintext highlighter-rouge">all</code>), it then runs each selected module’s <code class="language-plaintext highlighter-rouge">init</code> in order: accounts, entities, period, journal, invoices, vat, attachments, bank, budget, assets, inventory, loans, payroll (only the modules whose flag was passed). Each step is implemented by the corresponding module (e.g. <code class="language-plaintext highlighter-rouge">bus config init</code>, <code class="language-plaintext highlighter-rouge">bus accounts init</code>). Each module’s <code class="language-plaintext highlighter-rouge">init</code> creates its baseline data only when absent; if the data already exists in full, the module prints a warning and does nothing; if the data exists only partially, the module fails with an error and does not modify any file. The tool depends on the <code class="language-plaintext highlighter-rouge">bus</code> dispatcher being available in your <code class="language-plaintext highlighter-rouge">PATH</code>; if <code class="language-plaintext highlighter-rouge">bus</code> is not found, the command exits with a clear “bus dispatcher not found in PATH” error. When every invoked command exits with code 0, the run is complete. The command does not verify a fixed list of baseline paths afterward; each module owns its datasets and schemas and is responsible for failing its init if it cannot create them.</p>

<p>The initial <code class="language-plaintext highlighter-rouge">datapackage.json</code> is created by <code class="language-plaintext highlighter-rouge">bus config init</code> and follows the <a href="../data/workspace-configuration">workspace configuration</a> shape. Defaults include <code class="language-plaintext highlighter-rouge">profile</code> <code class="language-plaintext highlighter-rouge">tabular-data-package</code>, <code class="language-plaintext highlighter-rouge">base_currency</code> <code class="language-plaintext highlighter-rouge">EUR</code>, <code class="language-plaintext highlighter-rouge">vat_reporting_period</code> <code class="language-plaintext highlighter-rouge">quarterly</code>, and fiscal year and VAT registration set as documented in the data package extension. You can adjust these afterward with <a href="./bus-config">bus config configure</a>.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="files">Files</h3>

<p>The command invokes <code class="language-plaintext highlighter-rouge">bus config init</code> (which creates or ensures <code class="language-plaintext highlighter-rouge">datapackage.json</code>) and, when module flags are supplied, each selected domain module’s init so that those modules’ datasets and schema files appear in the workspace root. With no module flags, only <code class="language-plaintext highlighter-rouge">datapackage.json</code> is created. Bus init does not write any files directly; it only orchestrates the sequence. Success is determined by each step’s exit code, not by a post-hoc check of baseline paths.</p>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="exit-status-and-errors">Exit status and errors</h3>

<p>Exit 0 on success. Non-zero in these cases:</p>

<ul>
  <li>
<strong>Invalid usage (exit 2)</strong> — Unknown or invalid flag value (e.g. invalid <code class="language-plaintext highlighter-rouge">--color</code>), combining <code class="language-plaintext highlighter-rouge">--quiet</code> and <code class="language-plaintext highlighter-rouge">--verbose</code>, or extra positional arguments for <code class="language-plaintext highlighter-rouge">init</code>. The tool prints a short usage-style error to stderr.</li>
  <li>
<strong>Missing bus dispatcher (exit 1)</strong> — <code class="language-plaintext highlighter-rouge">bus</code> is not found in <code class="language-plaintext highlighter-rouge">PATH</code>. Message: “bus dispatcher not found in PATH”.</li>
  <li>
<strong>Module init failure (exit non-zero)</strong> — A module’s <code class="language-plaintext highlighter-rouge">init</code> command fails. The tool stops immediately after that step and reports “step failed: bus <em>module</em> init” (with the actual module name) on stderr. It does not run later steps.</li>
  <li>
<strong>Module compatibility (exit non-zero)</strong> — A module exits with code 2, indicating a version or compatibility issue. The tool reports that the module “must be upgraded” and stops.</li>
</ul>

</div></section><section class="busdk-chapter busdk-chapter--level-3"><div class="busdk-chapter-section-inner busdk-content-inner">
<h3 id="development-state">Development state</h3>

<p><strong>Value:</strong> Initialize a new BusDK workspace with config only or with a full baseline (config plus all 13 data-owning module inits), so users can run <code class="language-plaintext highlighter-rouge">bus init</code> or <code class="language-plaintext highlighter-rouge">bus init all</code> and get a deterministic, script-friendly setup.</p>

<p><strong>Completeness:</strong> 70% (Broadly usable) — config-only and full-baseline init are fully covered by e2e; subcommands <code class="language-plaintext highlighter-rouge">defaults</code> and <code class="language-plaintext highlighter-rouge">all</code>, exclusions, global flags, and stub delegation are verified.</p>

<p><strong>Current:</strong> E2e script <code class="language-plaintext highlighter-rouge">tests/e2e_bus_init.sh</code> proves config-only init (no subcommand or <code class="language-plaintext highlighter-rouge">defaults</code>) creates only <code class="language-plaintext highlighter-rouge">datapackage.json</code>; <code class="language-plaintext highlighter-rouge">all</code> runs config then all 13 module inits in order; <code class="language-plaintext highlighter-rouge">all --no-payroll</code> excludes payroll; per-module flags run only selected inits; invalid usage (color, format, quiet+verbose, extra positionals) and missing bus dispatcher yield correct exit codes. Unit tests in <code class="language-plaintext highlighter-rouge">internal/businit/run_test.go</code> and <code class="language-plaintext highlighter-rouge">internal/cli/flags_test.go</code> cover parsing and step order.</p>

<p><strong>Planned next:</strong> Any follow-up unit or e2e refinements.</p>

<p><strong>Blockers:</strong> None known.</p>

<p><strong>Depends on:</strong> None (orchestrates <a href="./bus-config">bus-config</a> and each module’s init).</p>

<p><strong>Used by:</strong> The <a href="../cli/command-structure">bus</a> dispatcher invokes this when users run <code class="language-plaintext highlighter-rouge">bus init</code>.</p>

<p>See <a href="../implementation/development-status">Development status</a>.</p>

<hr>

<!-- busdk-docs-nav start -->
</div></section>
</div></section><div class="busdk-prev-next-bar"><div class="busdk-content-inner"><p class="busdk-prev-next">
  <span class="busdk-prev-next-item busdk-prev">← <a href="./index">Module CLI reference</a></span>
  <span class="busdk-prev-next-item busdk-index"><a href="./index">Module CLI reference</a></span>
  <span class="busdk-prev-next-item busdk-next"><a href="./bus-config">bus-config</a> →</span>
</p></div></div>
<!-- busdk-docs-nav end -->

<div class="busdk-meta-block busdk-content-inner"><div class="busdk-meta-section">
<h3 id="sources">Sources</h3>

<ul>
  <li><a href="../sdd/bus-init">Module SDD: bus-init</a></li>
  <li><a href="./bus-config">bus-config CLI reference</a></li>
  <li><a href="../layout/layout-principles">Layout: Layout principles</a></li>
  <li><a href="../workflow/initialize-repo">Workflow: Initialize repo</a></li>
</ul>
</div></div>
          </div>
        </main>
      </div>

      
      <footer class="busdk-footer" role="contentinfo">
        <div class="busdk-footer-inner">
          <span class="busdk-footer-edit">This site is open source. <a href="https://github.com/busdk/docs/edit/gh-pages/modules/bus-init.md">Improve this page</a>.</span>
          <span class="busdk-footer-copyright">&copy; 2026 <a href="https://hg.fi">Heusala Group Ltd</a></span>
        </div>
      </footer>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
